import { MixedRoute, V2Route, V3Route } from '@tartz-one/smart-order-router/build/main/routers';
import { Protocol } from '@uniswap/router-sdk';
import { TokenMarshaller } from './token-marshaller';
import { PairMarshaller } from './pair-marshaller';
import { PoolMarshaller } from './pool-marshaller';
import { Pool } from '@uniswap/v3-sdk';
export class RouteMarshaller {
    static marshal(route) {
        switch (route.protocol) {
            case Protocol.V2:
                return {
                    protocol: Protocol.V2,
                    input: TokenMarshaller.marshal(route.input),
                    output: TokenMarshaller.marshal(route.output),
                    pairs: route.pairs.map((pair) => PairMarshaller.marshal(pair)),
                };
            case Protocol.V3:
                return {
                    protocol: Protocol.V3,
                    input: TokenMarshaller.marshal(route.input),
                    output: TokenMarshaller.marshal(route.output),
                    pools: route.pools.map((pool) => PoolMarshaller.marshal(pool)),
                };
            case Protocol.MIXED:
                return {
                    protocol: Protocol.MIXED,
                    input: TokenMarshaller.marshal(route.input),
                    output: TokenMarshaller.marshal(route.output),
                    pools: route.pools.map((tpool) => {
                        if (tpool instanceof Pool) {
                            return PoolMarshaller.marshal(tpool);
                        }
                        else {
                            return PairMarshaller.marshal(tpool);
                        }
                    }),
                };
        }
    }
    static unmarshal(marshalledRoute) {
        switch (marshalledRoute.protocol) {
            case Protocol.V2:
                const v2Route = marshalledRoute;
                return new V2Route(v2Route.pairs.map((marshalledPair) => PairMarshaller.unmarshal(marshalledPair)), TokenMarshaller.unmarshal(v2Route.input), TokenMarshaller.unmarshal(v2Route.output));
            case Protocol.V3:
                const v3Route = marshalledRoute;
                return new V3Route(v3Route.pools.map((marshalledPool) => PoolMarshaller.unmarshal(marshalledPool)), TokenMarshaller.unmarshal(v3Route.input), TokenMarshaller.unmarshal(v3Route.output));
            case Protocol.MIXED:
                const mixedRoute = marshalledRoute;
                const tpools = mixedRoute.pools.map((tpool) => {
                    if (tpool.protocol === Protocol.V2) {
                        return PairMarshaller.unmarshal(tpool);
                    }
                    else {
                        return PoolMarshaller.unmarshal(tpool);
                    }
                });
                return new MixedRoute(tpools, TokenMarshaller.unmarshal(mixedRoute.input), TokenMarshaller.unmarshal(mixedRoute.output));
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGUtbWFyc2hhbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYi9oYW5kbGVycy9yb3V0ZXItZW50aXRpZXMvcm91dGUtY2FjaGluZy9tYXJzaGFsbGluZy9yb3V0ZS1tYXJzaGFsbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGtEQUFrRCxDQUFBO0FBQy9GLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQTtBQUM5QyxPQUFPLEVBQW1CLGVBQWUsRUFBRSxNQUFNLG9CQUFvQixDQUFBO0FBQ3JFLE9BQU8sRUFBa0IsY0FBYyxFQUFFLE1BQU0sbUJBQW1CLENBQUE7QUFDbEUsT0FBTyxFQUFrQixjQUFjLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQTtBQUNsRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0saUJBQWlCLENBQUE7QUF5QnRDLE1BQU0sT0FBTyxlQUFlO0lBQ25CLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBcUM7UUFDekQsUUFBUSxLQUFLLENBQUMsUUFBUSxFQUFFO1lBQ3RCLEtBQUssUUFBUSxDQUFDLEVBQUU7Z0JBQ2QsT0FBTztvQkFDTCxRQUFRLEVBQUUsUUFBUSxDQUFDLEVBQUU7b0JBQ3JCLEtBQUssRUFBRSxlQUFlLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7b0JBQzNDLE1BQU0sRUFBRSxlQUFlLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7b0JBQzdDLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDL0QsQ0FBQTtZQUNILEtBQUssUUFBUSxDQUFDLEVBQUU7Z0JBQ2QsT0FBTztvQkFDTCxRQUFR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ImltcG9ydCB7IE1peGVkUm91dGUsIFYyUm91dGUsIFYzUm91dGUgfSBmcm9tICdAdGFydHotb25lL3NtYXJ0LW9yZGVyLXJvdXRlci9idWlsZC9tYWluL3JvdXRlcnMnXG5pbXBvcnQgeyBQcm90b2NvbCB9IGZyb20gJ0B1bmlzd2FwL3JvdXRlci1zZGsnXG5pbXBvcnQgeyBNYXJzaGFsbGVkVG9rZW4sIFRva2VuTWFyc2hhbGxlciB9IGZyb20gJy4vdG9rZW4tbWFyc2hhbGxlcidcbmltcG9ydCB7IE1hcnNoYWxsZWRQYWlyLCBQYWlyTWFyc2hhbGxlciB9IGZyb20gJy4vcGFpci1tYXJzaGFsbGVyJ1xuaW1wb3J0IHsgTWFyc2hhbGxlZFBvb2wsIFBvb2xNYXJzaGFsbGVyIH0gZnJvbSAnLi9wb29sLW1hcnNoYWxsZXInXG5pbXBvcnQgeyBQb29sIH0gZnJvbSAnQHVuaXN3YXAvdjMtc2RrJ1xuXG5leHBvcnQgaW50ZXJmYWNlIE1hcnNoYWxsZWRWMlJvdXRlIHtcbiAgcHJvdG9jb2w6IFByb3RvY29sXG4gIGlucHV0OiBNYXJzaGFsbGVkVG9rZW5cbiAgb3V0cHV0OiBNYXJzaGFsbGVkVG9rZW5cbiAgcGFpcnM6IE1hcnNoYWxsZWRQYWlyW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYXJzaGFsbGVkVjNSb3V0ZSB7XG4gIHByb3RvY29sOiBQcm90b2NvbFxuICBpbnB1dDogTWFyc2hhbGxlZFRva2VuXG4gIG91dHB1dDogTWFyc2hhbGxlZFRva2VuXG4gIHBvb2xzOiBNYXJzaGFsbGVkUG9vbFtdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFyc2hhbGxlZE1peGVkUm91dGUge1xuICBwcm90b2NvbDogUHJvdG9jb2xcbiAgaW5wdXQ6IE1hcnNoYWxsZWRUb2tlblxuICBvdXRwdXQ6IE1hcnNoYWxsZWRUb2tlblxuICBwb29sczogKE1hcnNoYWxsZWRQb29sIHwgTWFyc2hhbGxlZFBhaXIpW11cbn1cblxuZXhwb3J0IHR5cGUgTWFyc2hhbGxlZFJvdXRlID0gTWFyc2hhbGxlZFYyUm91dGUgfCBNYXJzaGFsbGVkVjNSb3V0ZSB8IE1hcnNoYWxsZWRNaXhlZFJvdXRlXG5cbmV4cG9ydCBjbGFzcyBSb3V0ZU1hcnNoYWxsZXIge1xuICBwdWJsaWMgc3RhdGljIG1hcnNoYWwocm91dGU6IFYzUm91dGUgfCBWMlJvdXRlIHwgTWl4ZWRSb3V0ZSk6IE1hcnNoYWxsZWRSb3V0ZSB7XG4gICAgc3dpdGNoIChyb3V0ZS5wcm90b2NvbCkge1xuICAgICAgY2FzZSBQcm90b2NvbC5WMjpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBwcm90b2NvbDogUHJvdG9jb2wuVjIsXG4gICAgICAgICAgaW5wdXQ6IFRva2VuTWFyc2hhbGxlci5tYXJzaGFsKHJvdXRlLmlucHV0KSxcbiAgICAgICAgICBvdXRwdXQ6IFRva2VuTWFyc2hhbGxlci5tYXJzaGFsKHJvdXRlLm91dHB1dCksXG4gICAgICAgICAgcGFpcnM6IHJvdXRlLnBhaXJzLm1hcCgocGFpcikgPT4gUGFpck1hcnNoYWxsZXIubWFyc2hhbChwYWlyKSksXG4gICAgICAgIH1cbiAgICAgIGNhc2UgUHJvdG9jb2wuVjM6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcHJvdG9jb2w6IFByb3RvY29sLlYzLFxuICAgICAgICAgIGlucHV0OiBUb2tlbk1hcnNoYWxsZXIubWFyc2hhbChyb3V0ZS5pbnB1dCksXG4gICAgICAgICAgb3V0cHV0OiBUb2tlbk1hcnNoYWxsZXIubWFyc2hhbChyb3V0ZS5vdXRwdXQpLFxuICAgICAgICAgIHBvb2xzOiByb3V0ZS5wb29scy5tYXAoKHBvb2wpID0+IFBvb2xNYXJzaGFsbGVyLm1hcnNoYWwocG9vbCkpLFxuICAgICAgICB9XG4gICAgICBjYXNlIFByb3RvY29sLk1JWEVEOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHByb3RvY29sOiBQcm90b2NvbC5NSVhFRCxcbiAgICAgICAgICBpbnB1dDogVG9rZW5NYXJzaGFsbGVyLm1hcnNoYWwocm91dGUuaW5wdXQpLFxuICAgICAgICAgIG91dHB1dDogVG9rZW5NYXJzaGFsbGVyLm1hcnNoYWwocm91dGUub3V0cHV0KSxcbiAgICAgICAgICBwb29sczogcm91dGUucG9vbHMubWFwKCh0cG9vbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRwb29sIGluc3RhbmNlb2YgUG9vbCkge1xuICAgICAgICAgICAgICByZXR1cm4gUG9vbE1hcnNoYWxsZXIubWFyc2hhbCh0cG9vbClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBQYWlyTWFyc2hhbGxlci5tYXJzaGFsKHRwb29sKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLFxuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyB1bm1hcnNoYWwobWFyc2hhbGxlZFJvdXRlOiBNYXJzaGFsbGVkUm91dGUpOiBWM1JvdXRlIHwgVjJSb3V0ZSB8IE1peGVkUm91dGUge1xuICAgIHN3aXRjaCAobWFyc2hhbGxlZFJvdXRlLnByb3RvY29sKSB7XG4gICAgICBjYXNlIFByb3RvY29sLlYyOlxuICAgICAgICBjb25zdCB2MlJvdXRlID0gbWFyc2hhbGxlZFJvdXRlIGFzIE1hcnNoYWxsZWRWMlJvdXRlXG4gICAgICAgIHJldHVybiBuZXcgVjJSb3V0ZShcbiAgICAgICAgICB2MlJvdXRlLnBhaXJzLm1hcCgobWFyc2hhbGxlZFBhaXIpID0+IFBhaXJNYXJzaGFsbGVyLnVubWFyc2hhbChtYXJzaGFsbGVkUGFpcikpLFxuICAgICAgICAgIFRva2VuTWFyc2hhbGxlci51bm1hcnNoYWwodjJSb3V0ZS5pbnB1dCksXG4gICAgICAgICAgVG9rZW5NYXJzaGFsbGVyLnVubWFyc2hhbCh2MlJvdXRlLm91dHB1dClcbiAgICAgICAgKVxuICAgICAgY2FzZSBQcm90b2NvbC5WMzpcbiAgICAgICAgY29uc3QgdjNSb3V0ZSA9IG1hcnNoYWxsZWRSb3V0ZSBhcyBNYXJzaGFsbGVkVjNSb3V0ZVxuICAgICAgICByZXR1cm4gbmV3IFYzUm91dGUoXG4gICAgICAgICAgdjNSb3V0ZS5wb29scy5tYXAoKG1hcnNoYWxsZWRQb29sKSA9PiBQb29sTWFyc2hhbGxlci51bm1hcnNoYWwobWFyc2hhbGxlZFBvb2wpKSxcbiAgICAgICAgICBUb2tlbk1hcnNoYWxsZXIudW5tYXJzaGFsKHYzUm91dGUuaW5wdXQpLFxuICAgICAgICAgIFRva2VuTWFyc2hhbGxlci51bm1hcnNoYWwodjNSb3V0ZS5vdXRwdXQpXG4gICAgICAgIClcbiAgICAgIGNhc2UgUHJvdG9jb2wuTUlYRUQ6XG4gICAgICAgIGNvbnN0IG1peGVkUm91dGUgPSBtYXJzaGFsbGVkUm91dGUgYXMgTWFyc2hhbGxlZE1peGVkUm91dGVcbiAgICAgICAgY29uc3QgdHBvb2xzID0gbWl4ZWRSb3V0ZS5wb29scy5tYXAoKHRwb29sKSA9PiB7XG4gICAgICAgICAgaWYgKHRwb29sLnByb3RvY29sID09PSBQcm90b2NvbC5WMikge1xuICAgICAgICAgICAgcmV0dXJuIFBhaXJNYXJzaGFsbGVyLnVubWFyc2hhbCh0cG9vbCBhcyBNYXJzaGFsbGVkUGFpcilcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBvb2xNYXJzaGFsbGVyLnVubWFyc2hhbCh0cG9vbCBhcyBNYXJzaGFsbGVkUG9vbClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIG5ldyBNaXhlZFJvdXRlKFxuICAgICAgICAgIHRwb29scyxcbiAgICAgICAgICBUb2tlbk1hcnNoYWxsZXIudW5tYXJzaGFsKG1peGVkUm91dGUuaW5wdXQpLFxuICAgICAgICAgIFRva2VuTWFyc2hhbGxlci51bm1hcnNoYWwobWl4ZWRSb3V0ZS5vdXRwdXQpXG4gICAgICAgIClcbiAgICB9XG4gIH1cbn1cbiJdfQ==